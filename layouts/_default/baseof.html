<!DOCTYPE html>
<html lang="{{ with .Site.LanguageCode }}{{ . }}{{ else }}en-US{{ end }}">
  <head>
    <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    {{ with .Site.Params.favicon }}
    <link rel="shortcut icon" href="{{ . | absURL }}" />
    {{ end }}
    <title>
      {{- block "title" . }}{{ with .Title }}{{ . }} – {{ end }}{{ .Site.Title
      }}{{- end }}
    </title>

    <meta
      name="title"
      content="{{ with .Title }}{{ . }}{{ else }}{{ .Site.Title }}{{ end }}"
    />
    <meta
      name="description"
      content="{{ with .Description }}{{ . }}{{ else }}{{if .IsPage}}{{ .Summary }}{{ else }}{{ with .Site.Params.description }}{{ . }}{{ end }}{{ end }}{{ end }}"
    />
    <meta name="keywords" content="{{ if .IsPage}}{{ range $index, $tag :=
    .Params.tags }}{{ $tag }},{{ end }}{{ else }}{{ range $plural, $terms :=
    .Site.Taxonomies }}{{ range $term, $val := $terms }}{{ printf "%s," $term
    }}{{ end }}{{ end }}{{ end }}" /> {{ template "_internal/opengraph.html" .
    }} {{ template "_internal/twitter_cards.html" . }} {{ template
    "_internal/schema.html" . }}

    <meta name="referrer" content="no-referrer-when-downgrade" />

    {{ with .OutputFormats.Get "rss" -}} {{ printf `
    <link rel="%s" type="%s" href="%s" title="%s" />
    ` .Rel .MediaType.Type .Permalink $.Site.Title | safeHTML }} {{ end -}}
    <link rel="stylesheet" href="{{ "css/style.css" | relURL }}" />

    <script
      defer
      data-domain="betweentheprompts.com"
      src="https://plausible.io/js/script.js"
    ></script>
  </head>

  <body
    class="font-mono text-xs md:text-sm mx-auto max-w-content text-left bg-white dark:bg-[#081d27] break-words leading-6 text-[#444] dark:text-[#ddd] flex min-h-screen flex-col"
  >
    <header class="p-4">
      <div class="flex items-baseline justify-between gap-3 mb-2">
        <div class="flex items-center gap-3">
          <a
            href="{{ .Site.Home.RelPermalink }}"
            class="hover:no-underline flex gap-2 items-baseline"
          >
            {{ if not .IsHome }}
            <span
              class="bg-transparent border-0 text-lg text-[#444] dark:text-[#ddd] p-2 -ml-2 -my-3 rounded transition-colors duration-200 hover:bg-code-light dark:hover:bg-code-dark hover:text-[#222] dark:hover:text-[#eee] hover:no-underline"
              >←</span
            >
            {{ end }}
            <h2
              class="text-[1.5em] font-bold {{ if not .IsHome }} md:text-[1.2em]{{ end }} m-0"
            >
              {{ .Site.Title }}
            </h2>
          </a>
        </div>

        <!-- Language Navigation -->
        {{ if hugo.IsMultilingual }}
        <nav>
          <ul class="flex gap-2 text-xs">
            {{ range $.Page.AllTranslations }}
            <li>
              <a
                href="{{ .RelPermalink }}"
                class="px-2 py-1 rounded transition-colors duration-200 
                      {{ if eq .Language.Lang $.Site.Language.Lang }}
                        bg-code-light dark:bg-code-dark text-[#222] dark:text-[#eee]
                      {{ else }}
                        hover:bg-code-light dark:hover:bg-code-dark hover:text-[#222] dark:hover:text-[#eee] hover:no-underline
                      {{ end }}"
              >
                {{ .Language.LanguageName }}
              </a>
            </li>
            {{ end }}
          </ul>
        </nav>
        {{ end }}
      </div>
    </header>

    <main
      class="px-4 flex-1 prose prose-sm dark:prose-invert text-xs md:text-sm max-w-none"
    >
      {{- block "main" . }}{{- end }}
    </main>

    <footer class="pt-12 px-4 pb-4 text-center text-xs">
      {{ if eq .Site.Language.Lang "fr" }} Créé par
      <a href="https://scastiel.dev" target="_blank">Sebastien Castiel</a> (<a
        href="https://github.com/scastiel"
        target="_blank"
        >GitHub</a
      >,
      <a href="https://linkedin.com/in/scastiel" target="_blank">LinkedIn</a
      >).<br />
      Contenu diffusé sous licence
      <a
        href="https://creativecommons.org/licenses/by-nc-sa/4.0/"
        target="_blank"
        >Creative Commons BY-NC-SA</a
      >. {{ else }} Made by
      <a href="https://scastiel.dev" target="_blank">Sebastien Castiel</a> (<a
        href="https://github.com/scastiel"
        target="_blank"
        >GitHub</a
      >,
      <a href="https://linkedin.com/in/scastiel" target="_blank">LinkedIn</a
      >).<br />
      Content released under
      <a
        href="https://creativecommons.org/licenses/by-nc-sa/4.0/"
        target="_blank"
        >Creative Commons BY-NC-SA licence</a
      >. {{ end }}
    </footer>
  </body>
</html>
